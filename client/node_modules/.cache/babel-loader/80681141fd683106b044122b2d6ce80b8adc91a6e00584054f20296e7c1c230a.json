{"ast":null,"code":"var _jsxFileName = \"C:\\\\reactGithub\\\\portakal\\\\client\\\\src\\\\pages\\\\RestaurantDetailPage.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { RestaurantsContext } from \"../context/RestaurantsContext\";\nimport RestaurantFinder from \"../apis/RestaurantFinder\";\nimport StarRating from \"../components/StarRating\";\nimport Reviews from \"../components/Reviews\";\nimport AddReview from \"../components/AddReview\";\nimport RestaurantDetailHeader from \"../components/RestaurantDetailHeader\";\nimport Cart from \"../components/elements/Cart\";\nimport ProductCard from \"../components/elements/ProductCard\";\nimport Loading from \"../components/Loading\";\nimport OrderModal from \"../components/OrderModal\";\nconst RestaurantDetailPage = () => {\n  _s();\n  const {\n    name,\n    setName\n  } = useContext(RestaurantsContext);\n  const {\n    surname,\n    setSurname\n  } = useContext(RestaurantsContext);\n  const {\n    id\n  } = useParams();\n  const {\n    selectedRestaurant,\n    setSelectedRestaurant\n  } = useContext(RestaurantsContext);\n  const [state, setState] = useState(false); //ordermodal\n  const [cart, setCart] = useState([]);\n  const [total, setTotal] = useState(0);\n  // console.log(selectedRestaurant);\n\n  useEffect(() => {\n    console.log(cart);\n  }, [cart]);\n  useEffect(() => {\n    setTotal(cart.reduce((acc, item) => {\n      console.log(item.quantity);\n      return acc + item.quantity * selectedRestaurant.products.find(product => product.product_id === item.product_id).price;\n    }, 0));\n  }, [cart]);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await RestaurantFinder.get(`/${id}`);\n        console.log(response.data.data);\n        setSelectedRestaurant(response.data.data);\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    fetchData();\n  }, []);\n  if (selectedRestaurant === null) {\n    return /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    });\n  }\n\n  // const addToCart = (product) => {\n  //   // // alert(product.name)\n  //   // let newCart = cart;\n  //   // // var addedItem = newCart.find(c => c.product.product_id === product.product_id);\n  //   // setCart([...cart,{product:product, quantity: 1}])\n  //   // console.log(\"satÄ±n al\")\n  //   setCart([...cart,product])\n  // }\n\n  return (\n    /*#__PURE__*/\n    // <div>\n    //   {selectedRestaurant && (\n    //     <>\n    //       <h1 className=\"text-center display-1\">\n    //         {selectedRestaurant.restaurant.name}\n    //       </h1>\n    //       <div className=\"text-center\">\n    //         <StarRating rating={selectedRestaurant.restaurant.average_rating} />\n    //         <span className=\"text-warning ml-1\">\n    //           {selectedRestaurant.restaurant.count\n    //             ? `(${selectedRestaurant.restaurant.count})`\n    //             : \"(0)\"}\n    //         </span>\n    //       </div>\n    //       <div className=\"mt-3\">\n    //         {/* {console.log(selectedRestaurant.reviews[selectedRestaurant.reviews.length-1, selectedRestaurant.reviews.length-2])} */}\n    //         <Reviews reviews={selectedRestaurant.reviews} />\n    //       </div>\n    //       <AddReview />\n    //     </>\n    //   )}\n    // </div>\n    React.createElement(\"div\", {\n      className: \"md:container mx-auto pt-8 relative\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(RestaurantDetailHeader, {\n      restaurant_name: selectedRestaurant.restaurant.name,\n      restaurant_picture: selectedRestaurant.restaurant.picture,\n      rating: selectedRestaurant.restaurant.average_rating,\n      review_count: selectedRestaurant.restaurant.count,\n      reviews: selectedRestaurant.reviews,\n      review1: selectedRestaurant.reviews[selectedRestaurant.reviews.length - 1],\n      review2: selectedRestaurant.reviews[selectedRestaurant.reviews.length - 2],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"flex mt-12 gap-x-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sticky top-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Cart, {\n      state: state,\n      setState: setState,\n      cart: cart,\n      setCart: setCart,\n      total: total,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"my-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"text-2xl font-semibold text-orange-500 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    }, \"Men\\xFCler\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bg-gray-700 h-px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"grid grid-cols-2 grid-flow-row gap-5 mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }\n    }, selectedRestaurant.products.map((product, index) => {\n      return /*#__PURE__*/React.createElement(ProductCard, {\n        key: product.product_id,\n        cart: cart,\n        setCart: setCart,\n        product: product\n        // key={product.product_id}\n        // name={product.name}\n        // price = {product.price}\n        // explanation = {product.explanation}\n        // picture={product.picture}\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 17\n        }\n      });\n    })))), /*#__PURE__*/React.createElement(OrderModal, {\n      name: name,\n      state: state,\n      setState: setState,\n      cart: cart,\n      setCart: setCart,\n      total: total,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 7\n      }\n    }))\n  );\n};\n_s(RestaurantDetailPage, \"xYgW5auufkpuTIIa1QSagzKHK1o=\", false, function () {\n  return [useParams];\n});\n_c = RestaurantDetailPage;\nexport default RestaurantDetailPage;\nvar _c;\n$RefreshReg$(_c, \"RestaurantDetailPage\");","map":{"version":3,"names":["React","useContext","useEffect","useState","useParams","RestaurantsContext","RestaurantFinder","StarRating","Reviews","AddReview","RestaurantDetailHeader","Cart","ProductCard","Loading","OrderModal","RestaurantDetailPage","name","setName","surname","setSurname","id","selectedRestaurant","setSelectedRestaurant","state","setState","cart","setCart","total","setTotal","console","log","reduce","acc","item","quantity","products","find","product","product_id","price","fetchData","response","get","data","err","restaurant","picture","average_rating","count","reviews","length","map","index"],"sources":["C:/reactGithub/portakal/client/src/pages/RestaurantDetailPage.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { RestaurantsContext } from \"../context/RestaurantsContext\";\r\nimport RestaurantFinder from \"../apis/RestaurantFinder\";\r\nimport StarRating from \"../components/StarRating\";\r\nimport Reviews from \"../components/Reviews\";\r\nimport AddReview from \"../components/AddReview\";\r\nimport RestaurantDetailHeader from \"../components/RestaurantDetailHeader\";\r\nimport Cart from \"../components/elements/Cart\";\r\nimport ProductCard from \"../components/elements/ProductCard\";\r\nimport Loading from \"../components/Loading\";\r\nimport OrderModal from \"../components/OrderModal\";\r\n\r\nconst RestaurantDetailPage = () => {\r\n\r\n  const {name, setName} = useContext(RestaurantsContext);\r\n  const {surname, setSurname} = useContext(RestaurantsContext);\r\n\r\n  const { id } = useParams();\r\n  const { selectedRestaurant, setSelectedRestaurant } = useContext(\r\n    RestaurantsContext\r\n  );\r\n\r\n  const [state, setState] = useState(false); //ordermodal\r\n  const [cart,setCart] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n  // console.log(selectedRestaurant);\r\n\r\n  useEffect(() => {\r\n    console.log(cart)\r\n  },[cart])\r\n  \r\n  useEffect(() => {\r\n\t\tsetTotal(\r\n\t\t\tcart.reduce((acc, item) => {\r\n        console.log(item.quantity);\r\n\t\t\t\treturn acc + (item.quantity * (selectedRestaurant.products.find(product => product.product_id === item.product_id).price))\r\n\t\t\t}, 0)\r\n\t\t)\r\n\t}, [cart])\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await RestaurantFinder.get(`/${id}`);\r\n        console.log(response.data.data);\r\n\r\n        setSelectedRestaurant(response.data.data);\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n\r\n  if (selectedRestaurant === null) {\r\n    return (\r\n      <Loading />\r\n    )\r\n  }\r\n\r\n  \r\n  // const addToCart = (product) => {\r\n  //   // // alert(product.name)\r\n  //   // let newCart = cart;\r\n  //   // // var addedItem = newCart.find(c => c.product.product_id === product.product_id);\r\n  //   // setCart([...cart,{product:product, quantity: 1}])\r\n  //   // console.log(\"satÄ±n al\")\r\n  //   setCart([...cart,product])\r\n  // }\r\n\r\n \r\n  return (\r\n    // <div>\r\n    //   {selectedRestaurant && (\r\n    //     <>\r\n    //       <h1 className=\"text-center display-1\">\r\n    //         {selectedRestaurant.restaurant.name}\r\n    //       </h1>\r\n    //       <div className=\"text-center\">\r\n    //         <StarRating rating={selectedRestaurant.restaurant.average_rating} />\r\n    //         <span className=\"text-warning ml-1\">\r\n    //           {selectedRestaurant.restaurant.count\r\n    //             ? `(${selectedRestaurant.restaurant.count})`\r\n    //             : \"(0)\"}\r\n    //         </span>\r\n    //       </div>\r\n    //       <div className=\"mt-3\">\r\n    //         {/* {console.log(selectedRestaurant.reviews[selectedRestaurant.reviews.length-1, selectedRestaurant.reviews.length-2])} */}\r\n    //         <Reviews reviews={selectedRestaurant.reviews} />\r\n    //       </div>\r\n    //       <AddReview />\r\n    //     </>\r\n    //   )}\r\n    // </div>\r\n\r\n    <div className='md:container mx-auto pt-8 relative'>\r\n      <RestaurantDetailHeader\r\n        restaurant_name={selectedRestaurant.restaurant.name}\r\n        restaurant_picture={selectedRestaurant.restaurant.picture}\r\n        rating={selectedRestaurant.restaurant.average_rating}\r\n        review_count={selectedRestaurant.restaurant.count}\r\n        reviews={selectedRestaurant.reviews}\r\n        review1={selectedRestaurant.reviews[selectedRestaurant.reviews.length - 1]}\r\n        review2={selectedRestaurant.reviews[selectedRestaurant.reviews.length - 2]}\r\n      />\r\n      {/* {console.log(selectedRestaurant.products)} */}\r\n      {/* {console.log(selectedRestaurant.reviews[selectedRestaurant.reviews.length-1])} */}\r\n      <div className='flex mt-12 gap-x-10'>\r\n        <div className='sticky top-0'>\r\n          <Cart state={state} setState={setState} cart ={cart} setCart={setCart} total={total} />\r\n        </div>\r\n\r\n        <div>\r\n          <div className='my-5'>\r\n            <h1 className='text-2xl font-semibold text-orange-500 mb-2'>MenÃ¼ler</h1>\r\n            <div className='bg-gray-700 h-px'></div>\r\n          </div>\r\n          <div className='grid grid-cols-2 grid-flow-row gap-5 mt-5'>\r\n            {selectedRestaurant.products.map((product, index) => {\r\n              return (\r\n                <ProductCard\r\n                  key={product.product_id}\r\n                  cart={cart}\r\n                  setCart={setCart}\r\n                  product={product}\r\n                  // key={product.product_id}\r\n                  // name={product.name}\r\n                  // price = {product.price}\r\n                  // explanation = {product.explanation}\r\n                  // picture={product.picture}\r\n                />\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <OrderModal name={name} state={state} setState={setState} cart={cart} setCart={setCart} total={total} />\r\n    </div>\r\n\r\n  );\r\n};\r\n\r\nexport default RestaurantDetailPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}