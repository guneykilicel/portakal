{"ast":null,"code":"var _jsxFileName = \"C:\\\\reactGithub\\\\pern-jwt-demo\\\\client\\\\src\\\\components\\\\RestaurantList.js\";\nimport React, { useEffect, useContext } from \"react\";\nimport RestaurantFinder from \"../apis/RestaurantFinder\";\nimport { RestaurantsContext } from \"../context/RestaurantsContext\";\nimport { useHistory } from \"react-router-dom\";\nimport StarRating from \"./StarRating\";\n\nconst RestaurantList = props => {\n  const {\n    restaurants,\n    setRestaurants\n  } = useContext(RestaurantsContext);\n  let history = useHistory();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await RestaurantFinder.get(\"/\");\n        console.log(response.data.data);\n        setRestaurants(response.data.data.restaurants);\n      } catch (err) {}\n    };\n\n    fetchData();\n  }, []);\n\n  const handleDelete = async (e, id) => {\n    e.stopPropagation();\n\n    try {\n      const response = await RestaurantFinder.delete(`/${id}`);\n      setRestaurants(restaurants.filter(restaurant => {\n        return restaurant.id !== id;\n      }));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleUpdate = (e, id) => {\n    e.stopPropagation();\n    history.push(`/restaurants/${id}/update`);\n  };\n\n  const handleRestaurantSelect = id => {\n    history.push(`/restaurants/${id}`);\n  };\n\n  const renderRating = restaurant => {\n    if (!restaurant.count) {\n      return React.createElement(\"span\", {\n        className: \"text-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"0 reviews\");\n    }\n\n    return React.createElement(React.Fragment, null, React.createElement(StarRating, {\n      rating: restaurant.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"text-warning ml-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"(\", restaurant.count, \")\"));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"list-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    className: \"table table-hover table-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    className: \"bg-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"Restaurant\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Location\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Price Range\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Ratings\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Edit\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Delete\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, restaurants && restaurants.map(restaurant => {\n    return React.createElement(\"tr\", {\n      onClick: () => handleRestaurantSelect(restaurant.id),\n      key: restaurant.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, restaurant.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, restaurant.location), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"$\".repeat(restaurant.price_range)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, renderRating(restaurant)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: e => handleUpdate(e, restaurant.id),\n      className: \"btn btn-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Update\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: e => handleDelete(e, restaurant.id),\n      className: \"btn btn-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Delete\")));\n  }))));\n};\n\nexport default RestaurantList;","map":{"version":3,"sources":["C:/reactGithub/pern-jwt-demo/client/src/components/RestaurantList.js"],"names":["React","useEffect","useContext","RestaurantFinder","RestaurantsContext","useHistory","StarRating","RestaurantList","props","restaurants","setRestaurants","history","fetchData","response","get","console","log","data","err","handleDelete","e","id","stopPropagation","delete","filter","restaurant","handleUpdate","push","handleRestaurantSelect","renderRating","count","map","name","location","repeat","price_range"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext } from \"react\";\r\nimport RestaurantFinder from \"../apis/RestaurantFinder\";\r\nimport { RestaurantsContext } from \"../context/RestaurantsContext\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport StarRating from \"./StarRating\";\r\n\r\nconst RestaurantList = (props) => {\r\n  const { restaurants, setRestaurants } = useContext(RestaurantsContext);\r\n  let history = useHistory();\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await RestaurantFinder.get(\"/\");\r\n        console.log(response.data.data);\r\n        setRestaurants(response.data.data.restaurants);\r\n      } catch (err) {}\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleDelete = async (e, id) => {\r\n    e.stopPropagation();\r\n    try {\r\n      const response = await RestaurantFinder.delete(`/${id}`);\r\n      setRestaurants(\r\n        restaurants.filter((restaurant) => {\r\n          return restaurant.id !== id;\r\n        })\r\n      );\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = (e, id) => {\r\n    e.stopPropagation();\r\n    history.push(`/restaurants/${id}/update`);\r\n  };\r\n\r\n  const handleRestaurantSelect = (id) => {\r\n    history.push(`/restaurants/${id}`);\r\n  };\r\n\r\n  const renderRating = (restaurant) => {\r\n    if (!restaurant.count) {\r\n      return <span className=\"text-warning\">0 reviews</span>;\r\n    }\r\n    return (\r\n      <>\r\n        <StarRating rating={restaurant.id} />\r\n        <span className=\"text-warning ml-1\">({restaurant.count})</span>\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"list-group\">\r\n      <table className=\"table table-hover table-dark\">\r\n        <thead>\r\n          <tr className=\"bg-primary\">\r\n            <th scope=\"col\">Restaurant</th>\r\n            <th scope=\"col\">Location</th>\r\n            <th scope=\"col\">Price Range</th>\r\n            <th scope=\"col\">Ratings</th>\r\n            <th scope=\"col\">Edit</th>\r\n            <th scope=\"col\">Delete</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {restaurants &&\r\n            restaurants.map((restaurant) => {\r\n              return (\r\n                <tr\r\n                  onClick={() => handleRestaurantSelect(restaurant.id)}\r\n                  key={restaurant.id}\r\n                >\r\n                  <td>{restaurant.name}</td>\r\n                  <td>{restaurant.location}</td>\r\n                  <td>{\"$\".repeat(restaurant.price_range)}</td>\r\n                  <td>{renderRating(restaurant)}</td>\r\n                  <td>\r\n                    <button\r\n                      onClick={(e) => handleUpdate(e, restaurant.id)}\r\n                      className=\"btn btn-warning\"\r\n                    >\r\n                      Update\r\n                    </button>\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      onClick={(e) => handleDelete(e, restaurant.id)}\r\n                      className=\"btn btn-danger\"\r\n                    >\r\n                      Delete\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          {/* <tr>\r\n            <td>mcdonalds</td>\r\n            <td>New YOrk</td>\r\n            <td>$$</td>\r\n            <td>Rating</td>\r\n            <td>\r\n              <button className=\"btn btn-warning\">Update</button>\r\n            </td>\r\n            <td>\r\n              <button className=\"btn btn-danger\">Delete</button>\r\n            </td>\r\n          </tr>\r\n\r\n          <tr>\r\n            <td>mcdonalds</td>\r\n            <td>New YOrk</td>\r\n            <td>$$</td>\r\n            <td>Rating</td>\r\n            <td>\r\n              <button className=\"btn btn-warning\">Update</button>\r\n            </td>\r\n            <td>\r\n              <button className=\"btn btn-danger\">Delete</button>\r\n            </td>\r\n          </tr> */}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RestaurantList;"]},"metadata":{},"sourceType":"module"}