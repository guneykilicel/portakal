{"ast":null,"code":"var _jsxFileName = \"C:\\\\reactGithub\\\\pern-jwt-demo\\\\client\\\\src\\\\components\\\\RestaurantList.js\";\nimport React, { useContext, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport RestaurantFinder from '../apis/RestaurantFinder';\nimport { RestaurantsContext } from '../context/RestaurantsContext';\nimport StarRating from './StarRating';\n\nconst RestaurantList = props => {\n  const {\n    restaurants,\n    setRestaurants\n  } = useContext(RestaurantsContext);\n  let history = useHistory();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await RestaurantFinder.get(\"/\");\n        console.log(response.data.data.restaurants);\n        setRestaurants(response.data.data.restaurants);\n      } catch (err) {}\n    };\n\n    fetchData();\n  }, []);\n\n  const handleDelete = async (e, id) => {\n    e.stopPropagation(); // update veya delete e bastığımızda restaurant detail açılıyordu bunu engellemek için\n\n    try {\n      const response = await RestaurantFinder.delete(`/${id}`); // console.log(response);\n\n      setRestaurants(restaurants.filter(restaurant => {\n        return restaurant.id !== id;\n      }));\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleUpdate = (e, id) => {\n    e.stopPropagation();\n    history.push(`/restaurants/${id}/update`);\n  };\n\n  const handleRestaurantSelect = id => {\n    history.push(`/restaurants/${id}`);\n  };\n\n  const renderRating = restaurant => {\n    console.log(restaurant);\n\n    if (!restaurant.count) {\n      return React.createElement(\"span\", {\n        className: \"text-warning\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, \"0 reviews\");\n    }\n\n    return React.createElement(React.Fragment, null, React.createElement(StarRating, {\n      rating: restaurant.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"text-warning ml-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"(\", restaurant.count, \")\"));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"list-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    className: \"table table-hover table-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    className: \"bg-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Restaurant\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Location\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Price Range\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Ratings\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Edit\"), React.createElement(\"th\", {\n    scope: \"col\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Delete\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, restaurants && restaurants.map(restaurant => {\n    return React.createElement(\"tr\", {\n      key: restaurant.id,\n      onClick: () => handleRestaurantSelect(restaurant.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, restaurant.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, restaurant.location), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"$\".repeat(restaurant.price_range)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, renderRating(restaurant)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: e => handleUpdate(e, restaurant.id),\n      className: \"btn btn-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Update\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: e => handleDelete(e, restaurant.id),\n      className: \"btn btn-danger\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Delete\")));\n  }))));\n};\n\nexport default RestaurantList;","map":{"version":3,"sources":["C:/reactGithub/pern-jwt-demo/client/src/components/RestaurantList.js"],"names":["React","useContext","useEffect","useHistory","RestaurantFinder","RestaurantsContext","StarRating","RestaurantList","props","restaurants","setRestaurants","history","fetchData","response","get","console","log","data","err","handleDelete","e","id","stopPropagation","delete","filter","restaurant","handleUpdate","push","handleRestaurantSelect","renderRating","count","map","name","location","repeat","price_range"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport RestaurantFinder from '../apis/RestaurantFinder'\r\nimport { RestaurantsContext } from '../context/RestaurantsContext'\r\nimport StarRating from './StarRating'\r\nconst RestaurantList = (props) => {\r\n\r\n    const { restaurants, setRestaurants } = useContext(RestaurantsContext)\r\n    let history = useHistory()\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await RestaurantFinder.get(\"/\");\r\n                console.log(response.data.data.restaurants);\r\n                setRestaurants(response.data.data.restaurants);\r\n            } catch (err) {\r\n\r\n            }\r\n        }\r\n        fetchData();\r\n    }, []);\r\n\r\n    const handleDelete = async (e, id) => {\r\n        e.stopPropagation(); // update veya delete e bastığımızda restaurant detail açılıyordu bunu engellemek için\r\n        try {\r\n            const response = await RestaurantFinder.delete(`/${id}`);\r\n            // console.log(response);\r\n            setRestaurants(restaurants.filter(restaurant => {\r\n                return restaurant.id !== id\r\n            }))\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    const handleUpdate = (e, id) => {\r\n        e.stopPropagation();\r\n        history.push(`/restaurants/${id}/update`);\r\n    }\r\n\r\n    const handleRestaurantSelect = (id) => {\r\n        history.push(`/restaurants/${id}`);\r\n    } \r\n\r\n    const renderRating = (restaurant) => {\r\n        console.log(restaurant);\r\n        if (!restaurant.count) {\r\n          return <span className=\"text-warning\">0 reviews</span>;\r\n        }\r\n        return (\r\n          <>\r\n            <StarRating rating={restaurant.id} />\r\n            <span className=\"text-warning ml-1\">({restaurant.count})</span>\r\n          </>\r\n        );\r\n      };\r\n\r\n    return (\r\n        <div className=\"list-group\">\r\n            <table className=\"table table-hover table-dark\">\r\n                <thead>\r\n                    <tr className=\"bg-primary\">\r\n                        <th scope=\"col\">Restaurant</th>\r\n                        <th scope=\"col\">Location</th>\r\n                        <th scope=\"col\">Price Range</th>\r\n                        <th scope=\"col\">Ratings</th>\r\n                        <th scope=\"col\">Edit</th>\r\n                        <th scope=\"col\">Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {restaurants &&\r\n                        restaurants.map((restaurant) => {\r\n                            return (\r\n                                <tr\r\n                                    key={restaurant.id}\r\n                                    onClick={() => handleRestaurantSelect(restaurant.id)}\r\n                                >\r\n                                    <td>{restaurant.name}</td>\r\n                                    <td>{restaurant.location}</td>\r\n                                    <td>{\"$\".repeat(restaurant.price_range)}</td>\r\n                                    <td>{renderRating(restaurant)}</td>\r\n                                    <td>\r\n                                        <button onClick={(e) => handleUpdate(e, restaurant.id)} className=\"btn btn-warning\">Update</button>\r\n                                    </td>\r\n                                    <td>\r\n                                        <button onClick={(e) => handleDelete(e, restaurant.id)} className=\"btn btn-danger\">Delete</button>\r\n                                    </td>\r\n                                </tr>\r\n                            );\r\n                        })}\r\n                    {/* <tr>\r\n            <td>mcdonalds</td>\r\n            <td>New YOrk</td>\r\n            <td>$$</td>\r\n            <td>Rating</td>\r\n            <td>\r\n              <button className=\"btn btn-warning\">Update</button>\r\n            </td>\r\n            <td>\r\n              <button className=\"btn btn-danger\">Delete</button>\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>mcdonalds</td>\r\n            <td>New YOrk</td>\r\n            <td>$$</td>\r\n            <td>Rating</td>\r\n            <td>\r\n              <button className=\"btn btn-warning\">Update</button>\r\n            </td>\r\n            <td>\r\n              <button className=\"btn btn-danger\">Delete</button>\r\n            </td>\r\n          </tr> */}\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RestaurantList"]},"metadata":{},"sourceType":"module"}